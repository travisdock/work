<div class="notebook-page">
  <div class="page-header">
    <h1 class="page-title">New Project</h1>
  </div>

  <%= form_with model: @project, local: true, class: "project-form" do |form| %>
    <% if @project.errors.any? %>
      <div class="error-summary">
        <h3><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</h3>
        <ul>
          <% @project.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= form.label :name, class: "form-label" %>
      <%= form.text_field :name, class: "input-box", placeholder: "Enter project name" %>
    </div>

    <div class="form-group">
      <%= form.label :description, class: "form-label" %>
      <%= form.text_area :description, class: "textarea-field", rows: 4, placeholder: "Describe your project..." %>
    </div>

    <div class="form-row">
      <div class="form-group">
        <%= form.label :start_date, class: "form-label" %>
        <%= form.date_field :start_date, class: "input-box" %>
      </div>

      <div class="form-group">
        <%= form.label :due_date, class: "form-label" %>
        <%= form.date_field :due_date, class: "input-box" %>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <%= form.label :status, class: "form-label" %>
        <%= form.select :status,
                        options_for_select(Project.statuses.map {|key, value| [key.humanize, key]}),
                        {},
                        {class: "input-box"} %>
      </div>

      <div class="form-group">
        <%= form.label :priority_number, "Priority (1-5)", class: "form-label" %>
        <%= form.select :priority_number,
                        options_for_select((1..5).map {|i| [i, i]}, 3),
                        {},
                        {class: "input-box"} %>
      </div>
    </div>

    <div class="form-group">
      <%= form.label :priority_tags, "Priority Tags", class: "form-label" %>
      <div class="checkbox-group">
        <% ['urgent', 'important', 'quick_win', 'deep_work'].each do |tag| %>
          <label class="checkbox-label">
            <%= check_box_tag "project[priority_tags][]", tag,
                              @project.priority_tags.include?(tag),
                              class: "checkbox-input" %>
            <span class="checkbox-custom"></span>
            <%= tag.humanize %>
          </label>
        <% end %>
      </div>
    </div>

    <div class="form-group">
      <%= form.label :next_action, class: "form-label" %>
      <%= form.text_field :next_action, class: "input-box", placeholder: "What's the immediate next step?" %>
    </div>

    <div class="form-actions">
      <%= form.submit "Create Project", class: "btn btn-primary" %>
      <%= link_to "Cancel", projects_path, class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>
